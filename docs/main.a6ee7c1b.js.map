{"version":3,"sources":["ed_scroll/main.js"],"names":["myScrollama","scrollama","figureHeight","window","innerHeight","figureMarginTop","stepH","Math","floor","figure","d3","select","imgV1","imgV2","imgV3","imgV4","imgV5","imgV6","article","steps","selectAll","handleResize","console","log","style","imgMargin","node","getBoundingClientRect","width","imgMargin3","imgMargin4","resize","handleStepChange","response","index","init","setup","step","offset","debug","onStepEnter","addEventListener"],"mappings":";AAGA,IAAIA,EAAcC,YAOZC,EAAoC,GAArBC,OAAOC,YACtBC,GAAmBF,OAAOC,YAAcF,GAAgB,EACxDI,EAAQC,KAAKC,MAA2B,IAArBL,OAAOC,aAO5BK,EAASC,GAAGC,OAAO,UACnBC,EAAQF,GAAGC,OAAO,UAClBE,EAAQH,GAAGC,OAAO,UAClBG,EAAQJ,GAAGC,OAAO,UAClBI,EAAQL,GAAGC,OAAO,UAClBK,EAAQN,GAAGC,OAAO,UAClBM,EAAQP,GAAGC,OAAO,UAElBO,EAAUR,GAAGC,OAAO,WACpBQ,EAAQT,GAAGU,UAAU,SAQzB,SAASC,IAEPC,QAAQC,IAAI,mBAGZJ,EAAMK,MAAM,SAAUlB,EAAQ,MAG9BG,EACGe,MAAM,SAAUtB,EAAe,MAC/BsB,MAAM,MAAOnB,EAAkB,MAGlCoB,WAAahB,EAAOiB,OAAOC,wBAAwBC,MAAQhB,EAAMc,OAAOC,wBAAwBC,OAAS,EACzGC,YAAcpB,EAAOiB,OAAOC,wBAAwBC,MAAQZ,EAAMU,OAAOC,wBAAwBC,OAAS,EAC1GE,YAAcrB,EAAOiB,OAAOC,wBAAwBC,MAAQX,EAAMS,OAAOC,wBAAwBC,OAAS,EAE1GhB,EAAMY,MAAM,OAAQC,UAAY,MAChCZ,EAAMW,MAAM,OAAQC,UAAY,MAChCX,EAAMU,MAAM,OAAQC,UAAY,MAChCV,EAAMS,MAAM,OAAQC,UAAY,MAChCT,EAAMQ,MAAM,OAAQK,WAAa,MACjCZ,EAAMO,MAAM,OAAQM,WAAa,MAGjC9B,EAAY+B,SASd,SAASC,EAAiBC,GAGhBA,OADRX,QAAQC,IAAIU,GACJA,EAASC,OACV,KAAA,EAEHtB,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,KACvB,MAEG,KAAA,EAEHZ,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,KACvB,MAEG,KAAA,EAEHZ,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,KACvB,MAEG,KAAA,EAEHZ,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,KACvB,MAEG,KAAA,EAEHZ,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,KACvB,MAEK,KAAA,EAEHZ,EAAMY,MAAM,UAAW,KACvBX,EAAMW,MAAM,UAAW,KACvBV,EAAMU,MAAM,UAAW,KACvBT,EAAMS,MAAM,UAAW,KACvBR,EAAMQ,MAAM,UAAW,KACvBP,EAAMO,MAAM,UAAW,MAgB/B,SAASW,IAGPvB,EAAMY,MAAM,UAAW,KAGvBH,IAGArB,EAAYoC,MAAM,CAChBC,KAAM,QACNC,OAAyC,IAAjC/B,KAAKC,MAAML,OAAOC,aAAqB,KAE/CmC,OAAO,IACNC,YAAYR,GAGf7B,OAAOsC,iBAAiB,SAAUpB,GAOpCc","file":"main.a6ee7c1b.js","sourceRoot":"..\\content","sourcesContent":["// ---------Section 0: Make a scrollama--------------- \r\n// Create a scrollama object.\r\n// ---------------------------------------------------\r\nvar myScrollama = scrollama();\r\n\r\n// ---------Section 1: Set Heights---------------\r\n//#region\r\n// Set the size of the figure and the height of the steps\r\n// These are set to constants to improve performance on mobile devices, while keeping the code relatively simple.\r\n// ----------------------------------------------\r\nconst figureHeight = window.innerHeight * 0.8\r\nconst figureMarginTop = (window.innerHeight - figureHeight) / 2\r\nconst stepH = Math.floor(window.innerHeight * 1.8);\r\n//#endregion\r\n\r\n// ---------Section 2: HTML -> D3--------------- \r\n//#region\r\n// Save different parts of the page as D3.js objects. We'll use these later for easy restyling. D3.js is used for convenience.\r\n// ---------------------------------------------\r\nvar figure = d3.select('figure');\r\nvar imgV1 = d3.select('#imgV1');\r\nvar imgV2 = d3.select('#imgV2');\r\nvar imgV3 = d3.select('#imgV3');\r\nvar imgV4 = d3.select('#imgV4');\r\nvar imgV5 = d3.select('#imgV5');\r\nvar imgV6 = d3.select(\"#imgV6\")\r\n\r\nvar article = d3.select('article');\r\nvar steps = d3.selectAll('.step');\r\n//#endregion\r\n\r\n// ---------Section 3: handleResize()---------------\r\n// Create a function which sets the styling of the various elements exactly as you want it to appear\r\n// This function could increase in complexity as you build responsive scrollytelling webpages. Here, this function\r\n// is relatively simple.\r\n// -------------------------------------------------\r\nfunction handleResize() {\r\n\r\n  console.log(\"handling resize\")\r\n\r\n  // 1. update height of step elements\r\n  steps.style('height', stepH + 'px');\r\n\r\n  // 2. update height, margin, and layering of the figure\r\n  figure\r\n    .style('height', figureHeight + 'px')\r\n    .style('top', figureMarginTop + 'px')\r\n\r\n  // 3. Calculate the necessary whitespace around the images\r\n  imgMargin = (figure.node().getBoundingClientRect().width - imgV1.node().getBoundingClientRect().width) / 2\r\n  imgMargin3 = (figure.node().getBoundingClientRect().width - imgV5.node().getBoundingClientRect().width) / 2\r\n  imgMargin4 = (figure.node().getBoundingClientRect().width - imgV6.node().getBoundingClientRect().width) / 2\r\n\r\n  imgV1.style('left', imgMargin + 'px')\r\n  imgV2.style('left', imgMargin + 'px')\r\n  imgV3.style('left', imgMargin + 'px')\r\n  imgV4.style('left', imgMargin + 'px')\r\n  imgV5.style('left', imgMargin3 + 'px')\r\n  imgV6.style('left', imgMargin4 + 'px')\r\n\r\n  // 4. tell scrollama to update new element dimensions. Not always necessary, but included just to be safe.\r\n  myScrollama.resize();\r\n\r\n}\r\n\r\n\r\n// ---------Section 4: handleStepChange()---------------\r\n// Create a function to update the figure in response to step-triggers.\r\n// Again, this function could get more complex as your story gets longer or updates in different ways.\r\n// -----------------------------------------------------\r\nfunction handleStepChange(response) {\r\n\r\n  console.log(response)\r\n  switch (response.index) {\r\n    case 0:\r\n      // Set image to first version\r\n      imgV1.style(\"opacity\", \"1\")\r\n      imgV2.style(\"opacity\", \"0\")\r\n      imgV3.style(\"opacity\", \"0\")\r\n      imgV4.style(\"opacity\", \"0\")\r\n      imgV5.style(\"opacity\", \"0\")\r\n      imgV6.style(\"opacity\", \"0\")\r\n      break;\r\n\r\n    case 1:\r\n      // Set image to second version\r\n      imgV1.style(\"opacity\", \"1\")\r\n      imgV2.style(\"opacity\", \"1\")\r\n      imgV3.style(\"opacity\", \"0\")\r\n      imgV4.style(\"opacity\", \"0\")\r\n      imgV5.style(\"opacity\", \"0\")\r\n      imgV6.style(\"opacity\", \"0\")\r\n      break;\r\n\r\n    case 2:\r\n      // Set image to third version\r\n      imgV1.style(\"opacity\", \"0\")\r\n      imgV2.style(\"opacity\", \"1\")\r\n      imgV3.style(\"opacity\", \"1\")\r\n      imgV4.style(\"opacity\", \"0\")\r\n      imgV5.style(\"opacity\", \"0\")\r\n      imgV6.style(\"opacity\", \"0\")\r\n      break;\r\n\r\n    case 3:\r\n      // Set image to third version\r\n      imgV1.style(\"opacity\", \"0\")\r\n      imgV2.style(\"opacity\", \"0\")\r\n      imgV3.style(\"opacity\", \"0\")\r\n      imgV4.style(\"opacity\", \"1\")\r\n      imgV5.style(\"opacity\", \"0\")\r\n      imgV6.style(\"opacity\", \"0\")\r\n      break;\r\n\r\n    case 4:\r\n      // Set image to third version\r\n      imgV1.style(\"opacity\", \"0\")\r\n      imgV2.style(\"opacity\", \"0\")\r\n      imgV3.style(\"opacity\", \"0\")\r\n      imgV4.style(\"opacity\", \"0\")\r\n      imgV5.style(\"opacity\", \"1\")\r\n      imgV6.style(\"opacity\", \"0\")\r\n      break;\r\n\r\n      case 5:\r\n        // Set image to third version\r\n        imgV1.style(\"opacity\", \"0\")\r\n        imgV2.style(\"opacity\", \"0\")\r\n        imgV3.style(\"opacity\", \"0\")\r\n        imgV4.style(\"opacity\", \"0\")\r\n        imgV5.style(\"opacity\", \"0\")\r\n        imgV6.style(\"opacity\", \"1\")\r\n        break;\r\n\r\n    default:\r\n      // do nothing\r\n      break;\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n// ---------Section 5: init()--------------- \r\n// Create a function that will run just once that first makes sure all the elements are sized like you want them,\r\n// and then sets up the scrollama. Finally, add an event listener to detect if the screen size has changed.\r\n// -----------------------------------------\r\nfunction init() {\r\n\r\n  // 0. Display the first image only once the all sizes are detected\r\n  imgV1.style(\"opacity\", \"1\")\r\n\r\n  // 1. force a resize on load to ensure proper dimensions are sent to scrollama\r\n  handleResize();\r\n\r\n  // 2. Setup the scrollama\r\n  myScrollama.setup({\r\n    step: '.step',\r\n    offset: Math.floor(window.innerHeight) * 1.3 + \"px\",\r\n    // set to true to see debug horizontal line\r\n    debug: false,\r\n  }).onStepEnter(handleStepChange)\r\n\r\n  // setup resize event\r\n  window.addEventListener('resize', handleResize);\r\n}\r\n\r\n\r\n// ---------Section 6: Wrap Up--------------- \r\n// This is where you'll want to include any other JavaScript that you've created for the webpage, and to run the init() function. \r\n// ------------------------------------------\r\ninit();"]}